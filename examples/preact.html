<html>
  <head>
    <title>Vendetta Preact adapter example</title>
  </head>
  <body>
    <script type="module">
      import { h, render } from "https://cdn.jsdelivr.net/npm/preact/dist/preact.mjs";
      import V, { VendettaRoot } from '../adapters/preact.js';
      import { methods } from '../../vendetta-themes/methods/default.js';
      
      const [v, stylesheet] = V(
        methods({
          unit: [8, 'px'],
          color: {
            T: 'transparent',
            t0: '#222',
            t1: '#2196f3',
            c0: '#eaeef0',
            c1: '#fff',
          },
          textSize: {
            xs: '12px',
            sm: '16px',
            md: '24px'
          },
          shadow: {
            sm: '0 2px 8px -3px rgba(0, 0, 0, 0.2)',
            md: '0 6px 16px -2px rgba(0, 0, 0, 0.4)',
          }
        })
      );
      
      const animateText = (duration) =>
        v.Animation(`${duration} infinite alternate ease-in-out`, {
          0: v.op`.4`.tsh`0 0 0 T`,
          100: v.op`1`.tc`t1`.tsh`0 0 8px t1`
        });
        
      const url = 'https://github.com/frameorc/vendetta/blob/main/examples/preact.html';
      const Body = VendettaRoot(() => h('div', {},
        v.abs.i`0`.ov`a`.bg`c0`.tc`t0`.m`0`({ $cls: 'test', textSizeAdjust: '100%' }),
        h('div', {}, v.col().gap`8`.w`mn`.mh`a`.mv`6`.tf`sans-serif`,
          h('div', {}, v.col().gap`2`,
            h('div', {}, v.tw`bold`.ts`md`.tws`p`,
              'A simple ', h('span', {}, animateText`2s`, 'V'), 'endetta example',
              h('a', { href: url, target: 'blank' },
                v.flr.tc`t1`.td`n`,
                v.Transition('.3s', v.op`.6`.brb`T`, v.Hover.op`1`.brb`t1`),
                'View source')
            ),
            h('div', {}, v.gap`4 2`.grid`4[12 6|24] 4[12|6]`,
              Array.from({length: 16}, (_, i) =>
                h('div', {}, v.r.p`2`.ts`sm`.sel`n`,
                  v.Transition('.25s', v.bg`c1`.ring`4px T`),
                  v.Hover.Transition('.5s', v.ring`2px t1`),
                  i == 0 ? 'Hover' : i
                )
              )
            )
          ),
          h('div', {}, v.tw`bold`.ts`md`,
            'Generated CSS',
            () => h('pre', {},
              v.tw`normal`.ts`xs`.tc`black`.tws`pw`.bg`c1`.p.r`2`.sel`n`,
              v.Transition('.5s', v.sh`sm`, v.Hover.sh`md`),
              [...stylesheet.rules].map(v => v.cssText).join('\n')
            )
          ),
        )
      ));
      render(h(Body), document.body);
    </script>
  </body>
</html>

